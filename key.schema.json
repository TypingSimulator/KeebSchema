{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "key.schema.json",
  "$defs": {
    "key": {
      "type": "object",
      "properties": {
        "keycode": {
          "type": "string",
          "enum": [
            "None",
            "Space",
            "Enter",
            "Tab",
            "Backquote",
            "Quote",
            "Semicolon",
            "Comma",
            "Period",
            "Slash",
            "Backslash",
            "LeftBracket",
            "RightBracket",
            "Minus",
            "Equals",
            "A",
            "B",
            "C",
            "D",
            "E",
            "F",
            "G",
            "H",
            "I",
            "J",
            "K",
            "L",
            "M",
            "N",
            "O",
            "P",
            "Q",
            "R",
            "S",
            "T",
            "U",
            "V",
            "W",
            "X",
            "Y",
            "Z",
            "Digit1",
            "Digit2",
            "Digit3",
            "Digit4",
            "Digit5",
            "Digit6",
            "Digit7",
            "Digit8",
            "Digit9",
            "Digit0",
            "LeftShift",
            "RightShift",
            "LeftAlt",
            "RightAlt",
            "LeftCtrl",
            "RightCtrl",
            "LeftMeta",
            "RightMeta",
            "ContextMenu",
            "Escape",
            "LeftArrow",
            "RightArrow",
            "UpArrow",
            "DownArrow",
            "Backspace",
            "PageDown",
            "PageUp",
            "Home",
            "End",
            "Insert",
            "Delete",
            "CapsLock",
            "NumLock",
            "PrintScreen",
            "ScrollLock",
            "Pause",
            "NumpadEnter",
            "NumpadDivide",
            "NumpadMultiply",
            "NumpadPlus",
            "NumpadMinus",
            "NumpadPeriod",
            "NumpadEquals",
            "Numpad0",
            "Numpad1",
            "Numpad2",
            "Numpad3",
            "Numpad4",
            "Numpad5",
            "Numpad6",
            "Numpad7",
            "Numpad8",
            "Numpad9",
            "F1",
            "F2",
            "F3",
            "F4",
            "F5",
            "F6",
            "F7",
            "F8",
            "F9",
            "F10",
            "F11",
            "F12"
          ]
        },
        "name": {
          "type": "string"
        },
        "profile": {
          "anyOf": [
            {
              "$ref": "profiles.schema.json#/$defs/UGLY"
            },
            {
              "$ref": "profiles.schema.json#/$defs/CHERRY"
            },
            {
              "$ref": "profiles.schema.json#/$defs/DSA"
            },
            {
              "$ref": "profiles.schema.json#/$defs/OEM"
            },
            {
              "$ref": "profiles.schema.json#/$defs/LAPTOP"
            },
            {
              "$ref": "profiles.schema.json#/$defs/CHICLET"
            }
          ]
        },
        "keyColor": {
          "type": "string"
        },
        "keyMaterial": {
          "type": "string",
          "enum": ["ABS"]
        },
        "legendColor": {
          "type": "string"
        },
        "legends": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "legendPosition": {
                "$ref": "#/$defs/legendPositionOptions"
              },
              "legendSet": {
                "type": "string",
                "enum": ["NotoSans", "NotoSerif", "NotoAlchemy", "Icons"]
              }
            },
            "required": ["legendSet"],
            "allOf": [
              {
                "if": {
                  "properties": {
                    "legendSet": { "const": "NotoSans" }
                  }
                },
                "then": {
                  "properties": {
                    "glyph": {
                      "$ref": "legendSetGlyphs.schema.json#/$defs/notoSans"
                    }
                  },
                  "required": ["glyph"]
                }
              },
              {
                "if": {
                  "properties": {
                    "legendSet": { "const": "NotoSerif" }
                  }
                },
                "then": {
                  "properties": {
                    "glyph": {
                      "$ref": "legendSetGlyphs.schema.json#/$defs/notoSerif"
                    }
                  },
                  "required": ["glyph"]
                }
              },
              {
                "if": {
                  "properties": {
                    "legendSet": { "const": "NotoAlchemy" }
                  }
                },
                "then": {
                  "properties": {
                    "glyph": {
                      "$ref": "legendSetGlyphs.schema.json#/$defs/notoAlchemy"
                    }
                  },
                  "required": ["glyph"]
                }
              },
              {
                "if": {
                  "properties": {
                    "legendSet": { "const": "Icons" }
                  }
                },
                "then": {
                  "properties": {
                    "glyph": {
                      "$ref": "legendSetGlyphs.schema.json#/$defs/icons"
                    }
                  },
                  "required": ["glyph"]
                }
              }
            ],
            "additionalItems": false
          }
        },
        "keySwitch": {
          "type": "string",
          "enum": ["none", "MX_Brown"]
        },
        "position": {
          "$ref": "#/$defs/transform"
        },
        "rotation": {
          "$ref": "#/$defs/transform"
        },
        "groups": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "hidden": {
          "type": "boolean"
        },
        "travelDistance": {
          "type": "number"
        },
        "overrides": {
          "type": "object",
          "properties": {
            "profile": {
              "type": "string"
            },
            "keyColor": {
              "type": "string"
            },
            "keyMaterial": {
              "type": "string"
            },
            "legendColor": {
              "type": "string"
            },
            "legends": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "legendSet": {
                    "type": "string"
                  },
                  "glyph": {
                    "type": "string"
                  },
                  "legendPosition": {
                    "$ref": "#/$defs/legendPositionOptions"
                  }
                }
              }
            },
            "hidden": {
              "type": "boolean"
            }
          }
        }
      },
      "required": [
        "keycode",
        "profile",
        "keyMaterial",
        "keyColor",
        "legendColor",
        "legends",
        "position",
        "rotation"
      ]
    },
    "baseLegend": {
      "type": "object",
      "properties": {
        "legendPosition": {
          "$ref": "#/$defs/legendPositionOptions"
        }
      },
      "required": ["legendPosition"]
    },
    "transform": {
      "type": "object",
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      },
      "required": ["x", "y", "z"]
    },
    "legendPositionOptions": {
      "type": "string",
      "enum": [
        "CenterCenter",
        "UpperLeft",
        "UpperCenter",
        "UpperRight",
        "LowerLeft",
        "LowerCenter",
        "LowerRight",
        "Front",
        "Full",
        "FullHeight"
      ]
    } 
  }
}
